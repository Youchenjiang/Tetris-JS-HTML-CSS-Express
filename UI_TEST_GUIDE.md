# 🎮 多人 UI 測試指南

## ✅ 已完成的更新

### 前端更新

1. ✅ **HTML 結構** - 全新的動態玩家容器
2. ✅ **CSS 樣式** - 響應式網格佈局（2-8 人自動適配）
3. ✅ **JavaScript** - 完全重寫以支援多人動態渲染
4. ✅ **Socket 事件** - 新增事件處理

## 🚀 測試步驟

### 1. 啟動服務器

```powershell
# 使用自定義端口（如果8800被占用）
$env:REACT_APP_SERVER_PORT=8801; $env:REACT_APP_CLIENT_PORT=3501; node index.js
```

服務器應該顯示：

```
Server listening on localhost:8801
Client listening on 3501
```

### 2. 打開多個瀏覽器標籤測試

**測試 2 人模式：**

- 標籤 1: `http://localhost:3501` - 輸入名稱 "Player1"
- 標籤 2: `http://localhost:3501` - 輸入名稱 "Player2"

**測試 4 人模式：**

- 標籤 1: `http://localhost:3501` - 輸入名稱 "Alice"
- 標籤 2: `http://localhost:3501` - 輸入名稱 "Bob"
- 標籤 3: `http://localhost:3501` - 輸入名稱 "Charlie"
- 標籤 4: `http://localhost:3501` - 輸入名稱 "Diana"

### 3. 預期 UI 效果

#### 註冊階段

- ✅ 看到居中的註冊表單
- ✅ 輸入玩家名稱（最多 10 個字符）
- ✅ 點擊"加入遊戲"按鈕

#### 等待階段

- ✅ 註冊表單消失
- ✅ 頂部顯示："房間人數: X/4"
- ✅ 當 ≥2 人時，顯示"開始遊戲"按鈕
- ✅ 玩家棋盤動態出現

#### 遊戲階段

- ✅ 所有玩家的棋盤同時顯示
- ✅ 自己的棋盤有綠色邊框
- ✅ 其他玩家的棋盤有灰色邊框
- ✅ 每個棋盤顯示：
  - 玩家名稱（你的棋盤顯示"你"）
  - 玩家 ID（USER1, USER2...）
  - 等級（Level: 0）
  - 預覽方塊（上方小格子）
  - 主遊戲區（21x10 格子）

### 4. 佈局測試

#### 2 人模式

```
┌─────────┐ ┌─────────┐
│ Player1 │ │ Player2 │
│ (你)    │ │         │
└─────────┘ └─────────┘
```

#### 4 人模式

```
┌────────┐ ┌────────┐
│Player1 │ │Player2 │
└────────┘ └────────┘
┌────────┐ ┌────────┐
│Player3 │ │Player4 │
└────────┘ └────────┘
```

#### 6 人模式

```
┌──────┐ ┌──────┐ ┌──────┐
│ P1   │ │ P2   │ │ P3   │
└──────┘ └──────┘ └──────┘
┌──────┐ ┌──────┐ ┌──────┐
│ P4   │ │ P5   │ │ P6   │
└──────┘ └──────┘ └──────┘
```

## 🎯 功能測試清單

### 基本功能

- [ ] 輸入玩家名稱並加入
- [ ] 房間人數正確顯示
- [ ] 開始按鈕在 ≥2 人時出現
- [ ] 所有玩家棋盤同時渲染

### 視覺效果

- [ ] 自己的棋盤有綠色邊框高亮
- [ ] 其他玩家棋盤為藍色文字
- [ ] 網格佈局自動適配玩家數量
- [ ] 預覽區域正確顯示下一個方塊

### 互動測試

- [ ] 方向鍵控制自己的方塊
- [ ] 空格鍵/上方向鍵旋轉方塊
- [ ] Enter 鍵開始遊戲（如果可用）
- [ ] 遊戲數據實時更新

### 異常處理

- [ ] 房間已滿時顯示拒絕訊息
- [ ] 玩家離開時顯示通知
- [ ] 人數不足時無法開始遊戲
- [ ] 連線失敗時顯示錯誤

## 🐛 調試技巧

### 查看控制台日誌

打開瀏覽器開發者工具（F12），查看 Console 標籤：

```javascript
// 應該看到的日誌：
connecting...
Connecting to: http://localhost:8801
Socket connected successfully
Game initializing...
Socket connected: <socket-id>
New user response: {size: 1, maxPlayers: 4, ...}
```

### 服務器日誌

服務器控制台應該顯示：

```
✅ 玩家連接：Player1 (USER1)
目前玩家數：1/4

✅ 玩家連接：Player2 (USER2)
目前玩家數：2/4

🎮 遊戲開始！玩家數：2/4
```

### 網絡請求

在開發者工具的 Network 標籤中，檢查：

- WebSocket 連線狀態
- Socket.IO 事件傳輸
- /config API 請求

## 🎨 CSS 類別檢查

用開發者工具檢查元素，確認應用了正確的類別：

```html
<!-- 遊戲容器 -->
<div id="game-container" class="game-container players-4">
  <!-- 我的玩家容器 -->
  <div class="player-container my-player" id="player-xxx">
    <div class="player-header">
      <div class="player-name">Alice (你)</div>
      <div class="player-status">USER1</div>
      <div class="player-level">Level: 0</div>
    </div>
    <div class="pre-game-board" id="pre-board-xxx"></div>
    <div class="game-board" id="board-xxx"></div>
  </div>

  <!-- 其他玩家容器 -->
  <div class="player-container other-player" id="player-yyy">...</div>
</div>
```

## 📱 響應式測試

### 桌面 (1920x1080)

- 4 人模式應該以 2x2 網格顯示
- 每個棋盤清晰可見
- 適當的間距

### 筆記本 (1366x768)

- 縮小版本但仍清晰
- 棋盤可能需要調整大小

### 平板 (768x1024)

- 可能需要滾動查看所有玩家
- 縱向排列

## ⚠️ 已知問題

1. **舊 game.js 兼容性**
   - 已創建新的`game-new.js`
   - 舊文件保留以備份
2. **方塊顏色**
   - 7 種不同顏色的方塊
   - 地面方塊為灰色
3. **性能考慮**
   - 8 人以上可能影響性能
   - 建議限制在 2-8 人

## 🔄 如果出現問題

### UI 未更新

1. 清除瀏覽器緩存（Ctrl+Shift+Del）
2. 硬刷新頁面（Ctrl+F5）
3. 檢查控制台錯誤

### Socket 連線失敗

1. 確認服務器正在運行
2. 檢查端口號是否正確
3. 查看服務器控制台錯誤

### 棋盤未顯示

1. 檢查`game-new.js`是否正確加載
2. 確認 Socket 事件正常觸發
3. 查看瀏覽器控制台錯誤

## 📊 測試報告模板

```
測試日期：____/____/____
測試人員：____________

✅ 2人模式：[ ] 通過 [ ] 失敗
✅ 4人模式：[ ] 通過 [ ] 失敗
✅ 6人模式：[ ] 通過 [ ] 失敗
✅ 8人模式：[ ] 通過 [ ] 失敗

發現的問題：
1. ____________________
2. ____________________
3. ____________________

建議改進：
1. ____________________
2. ____________________
```

---

最後更新：2025 年 10 月 1 日
